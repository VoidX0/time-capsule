---
title: éƒ¨ç½²æŒ‡å—
description: äº†è§£å¦‚ä½•éƒ¨ç½²æœ¬é¡¹ç›®
---

## å®‰è£…
- ğŸ—„ï¸ æœ¬é¡¹ç›®ä½¿ç”¨[PostgreSQL](https://www.postgresql.org/)æ•°æ®åº“ï¼Œå¦‚æœä¸ä½¿ç”¨[Docker Composeéƒ¨ç½²](#dockercomposeéƒ¨ç½²æ¨è)ï¼Œ
è¯·æ‰‹åŠ¨å®‰è£…PostgreSQLæ•°æ®åº“ï¼Œå¹¶ä¿®æ”¹[`ConnectionOptions__DbConnection`](./config/#connectionoptionsé…ç½®)é…ç½®é¡¹ã€‚
- âš™ï¸ æ‰€æœ‰é…ç½®é¡¹è¯·å‚è€ƒ[é…ç½®é¡¹](./config/)

### DockerComposeéƒ¨ç½²(æ¨è)

```yml
services:
  postgres:
    image: postgres:latest
    restart: always
    container_name: postgres
    environment:
      TZ: "Asia/Shanghai"
      POSTGRES_USER: "root" #åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·
      POSTGRES_PASSWORD: "time_capsule" #åˆ›å»ºç®¡ç†å‘˜å¯†ç 
    ports:
      - "5432:5432"
    volumes:
      - ./storage/postgres/data:/var/lib/postgresql/data #æ•°æ®
    healthcheck:
      test: [ "CMD-SHELL", "pg_isready" ]
      interval: 10s
      timeout: 5s
      retries: 5

  time-capsule:
    image: ghcr.io/voidx0/time-capsule:latest
    restart: always
    container_name: time-capsule
    environment:
      TZ: "Asia/Shanghai"
      SystemOptions__Instance: "docker-server"
      ConnectionOptions__DbConnection: "HOST=postgres; PORT=5432; DATABASE=time_capsule; USER ID=root; PASSWORD=time_capsule;"
    ports:
      - "8080:8080" # api
      - "3000:3000" # web
    volumes:
      - ./Monitor:/camera # æŒ‚è½½ç›‘æ§è§†é¢‘ç›®å½•
      - ./cache:/cache #ç¼“å­˜ç›®å½•
      - ./storage:/app/storage #å­˜å‚¨
    depends_on:
      postgres:
        condition: service_healthy
```

### æºç éƒ¨ç½²

1. ğŸ“¥å…‹éš†é¡¹ç›®ä»£ç å¹¶è¿›å…¥ç›®å½•`git clone https://github.com/VoidX0/time-capsule.git && cd time-capsule`
2. âš™ï¸å®‰è£…åç«¯ä¾èµ–å¹¶æ„å»º`cd api && dotnet restore && dotnet build`
3. ğŸ“¦å®‰è£…å‰ç«¯ä¾èµ–å¹¶æ„å»º`cd web && pnpm install && pnpm build`
4. ğŸ“é¡¹ç›®é…ç½®ï¼Œå…·ä½“é…ç½®é¡¹è¯·å‚è€ƒ[é…ç½®é¡¹](./config/)
5. ğŸš€è‡ªè¡Œå¯åŠ¨æˆ–æ‰˜ç®¡å‰ç«¯/åç«¯æœåŠ¡
